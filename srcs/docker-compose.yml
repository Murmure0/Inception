version: "3"

services:
  nginx:
    build: 
      context: ./requirements/nginx
    # depends_on:
    #   - wordpress
    ports:
      - "80:443"
    networks:
      - internalnetwork
    restart: always
    volumes:
      - php_nginx:/var/www/html
    container_name: nginx

    wordpress:
     container_name: wordpress
     depends_on: mariadb
     volumes:
      - mariadb-volume:/var/lib/mysql
     networks:
      - internalnetwork
     environment:
      - MARIADB_ROOT_PWD=${MARIADB_ROOT_PWD}
      - MARIADB_DB=${MARIADB_DB}
      - MARIADB_USER=${MARIADB_USER}
      - MARIADB_PWD=${MARIADB_PWD}
     restart: unless-stopped
    
networks:
  internalnetwork:

volumes:
 php_nginx:
        driver: local
        driver_opts:
            type: volume
            o: bind
            device: /var/
            